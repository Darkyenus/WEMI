
import wemi.Configurations.compilingKotlin
import wemi.compile.KotlinCompilerFlags
import wemi.compile.KotlinJVMCompilerFlags

///repository jitpack at https://jitpack.io
///dependency com.github.esotericsoftware:jsonbeans:0.9

val foxColor by key<String>("Color of an animal")

val hello by project {

    projectGroup set { "com.darkyen" }
    projectName set { "hello" }
    projectVersion set { "1.0-SNAPSHOT" }

    startYear set { 2017 }

    repositories add { repository("jitpack", "https://jitpack.io") }

    kotlinVersion set { wemi.compile.KotlinCompilerVersion.Version1_2_20 }

    libraryDependencies add { dependency("org.slf4j:slf4j-api:1.7.22") }
    libraryDependencies add { dependency("com.github.Darkyenus:tproll:v1.2.4") }
    libraryDependencies add { dependency("com.h2database:h2:1.4.196") }

    extend(compilingKotlin) {
        compilerOptions[KotlinCompilerFlags.customFlags] += "-Xno-optimize"
    }

    extend(running) {
        projectName set { "Greeting Simulator ${startYear.get()}" }
    }

    extend(testing) {
        // JUnit 5
        libraryDependencies add { JUnitAPI }
        libraryDependencies add { JUnitEngine }

        // JUnit 4
        //libraryDependencies add { dependency("junit:junit:4.12") }
        //libraryDependencies add { JUnit4Engine }
    }

    mainClass set { "hello.HelloWemiKt" }


    foxColor set { "Red" }
}

val arctic by configuration("When in snowy regions") {
    foxColor set {"White"}
}

val wonderland by configuration("When in wonderland") {
    foxColor set {"Rainbow"}

    extend (arctic) {
        foxColor set {"Transparent"}
    }
}

val heaven by configuration("Like wonderland, but better", wonderland) {
    foxColor set { "Octarine" }
}
